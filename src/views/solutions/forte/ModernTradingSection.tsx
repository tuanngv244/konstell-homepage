'use client';
import MainWrapper from '@/@core/components/shared/sections/main-wrapper';
import { useTranslation } from 'next-i18next';
import { useEffect, useRef } from 'react';

type Props = {};

const ModernTradingSection = ({}: Props) => {
  const { t } = useTranslation('common');
  const svgRef = useRef<SVGSVGElement | null>(null);

  const moderns = [
    t('solutionsPage.executionQualityAndCompliance'),
    t('solutionsPage.smartOrderRouting'),
    t('solutionsPage.smartOrderRouting'),
    t('solutionsPage.realTimeControlAndVisibility'),
  ];

  useEffect(() => {
    if (svgRef.current) {
      const paths = svgRef.current.querySelectorAll('path');
      console.log('Found paths:', paths.length);

      // Set up paths for CSS animation
      paths.forEach((path, index) => {
        if (path instanceof SVGPathElement) {
          const pathLength = path.getTotalLength();

          // Set CSS custom properties for each path
          path.style.setProperty('--path-length', pathLength.toString());
          path.style.stroke = '#7C6EF7';
          path.style.strokeWidth = '3';
          path.style.fill = '#7C6EF7';
          path.style.strokeLinecap = 'round';
          path.style.strokeLinejoin = 'round';

          // Add CSS class for animation with staggered delay
          path.classList.add('animated-path');
          path.style.animationDelay = `${index * 1}s`;
        }
      });
    }
  }, []);

  return (
    <>
      <section
        id="modernTrading"
        className="modernTrading-section bg-white sm:!py-[60px]  xs:py-[30px] "
      >
        <MainWrapper>
          <div className="flex flex-col items-center justify-center text-center  mx-auto">
            <h3
              className="section-title"
              dangerouslySetInnerHTML={{
                __html: t('solutionsPage.builtForTheDemandsOfModernTrading'),
              }}
            />
            <p className="mt-2 section-desc !text-gray-600">
              {t('solutionsPage.forteAlgoIsTrustedByFirms')}
            </p>
          </div>
          <div className="xs:mt-[1.5rem] sm:!mt-[3.5rem] grid xs:grid-cols-1 sm:!grid-cols-2 lg:!grid-cols-4 relative xs:px-[1rem] sm:!px-[5rem]">
            {/* SVG Animations */}
            <div className="svg-container xs:hidden lg:!block">
              <svg
                ref={svgRef}
                width="100%"
                height={308}
                viewBox="0 0 1275 308"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M1021.94 42.8584C1074.15 -8.94521 1159.52 -13.654 1217.29 32.3857C1247.63 56.5703 1266.16 87.5478 1272.81 125.617V125.618C1273.21 127.878 1273.95 130.132 1274.5 132.3V167.974C1269.27 193.834 1260.68 218.177 1244.45 239.44C1196.82 301.805 1110.46 317.227 1044.07 275.031L1044.07 275.03C1039.97 272.437 1035.98 269.109 1030.32 269.129L1029.73 269.12C1026.81 269.034 1024.4 268.303 1022.67 266.88C1020.84 265.373 1019.69 263.034 1019.57 259.662V259.661C1019.46 256.868 1020.13 254.602 1021.49 252.967C1022.85 251.334 1024.94 250.27 1027.79 249.97C1031.11 249.62 1033.59 250.338 1035.41 251.866C1037.23 253.404 1038.43 255.819 1039.06 258.996V258.999C1039.32 260.301 1039.76 261.607 1040.41 263.995L1040.45 264.173L1040.61 264.276C1082.32 292.825 1127.71 300.002 1175.97 281.967C1236.58 259.349 1274.18 197.603 1266.78 135C1259.04 69.5725 1210.5 17.9186 1145.49 9.62109C1088.51 2.33224 1041.81 22.0643 1008.17 69.6172C986.313 100.507 972.492 135.547 956.207 169.209C941.19 200.253 926.617 231.414 901.569 256.263C848.993 308.446 763.25 312.815 705.515 266.137H705.514C691.928 255.143 680.654 242.413 671.411 227.768C668.734 223.525 666.034 219.512 661.126 216.981C658.474 215.61 656.823 213.708 656.113 211.513C655.402 209.313 655.615 206.753 656.816 204.036C657.764 201.919 659.183 200.453 660.903 199.671C662.625 198.888 664.699 198.767 666.992 199.431C669.854 200.269 672.069 201.703 673.39 203.606C674.702 205.498 675.169 207.91 674.44 210.799H674.439C672.806 217.304 675.397 222.029 678.542 226.885C732.127 309.703 852.172 313.943 911.254 235.12C932.796 206.385 946.432 173.472 961.585 141.438C978.184 106.362 993.715 70.8663 1021.94 42.8584Z"
                  fill="none"
                  stroke="#7C6EF7"
                  strokeWidth="3"
                  strokeLinecap="round"
                  strokeLinejoin="round"
                />
                <path
                  d="M34.709 62.5166C81.9269 5.30815 165.958 -7.80436 230.018 32.6172C232.185 33.9865 234.363 35.6129 236.67 36.8525C239.008 38.1089 241.56 39.0198 244.597 38.999C249.742 38.9606 254.304 42.4166 254.908 47.4268V47.4277C255.274 50.3718 254.625 52.7653 253.254 54.5225C251.88 56.2823 249.742 57.4571 247.034 57.8818H247.033C243.699 58.4059 241.207 57.7711 239.403 56.2852C237.7 54.882 236.542 52.664 235.911 49.749L235.792 49.1562C235.548 47.8544 235.115 46.5386 234.466 44.0381L234.419 43.8564L234.264 43.751L233.23 43.0518C189.485 13.6495 141.961 6.69002 92.5742 28.4541C41.0317 51.165 11.4746 91.7981 7.90527 148.317C5.96161 178.895 11.7023 205.737 24.6641 228.521C37.6254 251.305 57.7903 270.002 84.6475 284.32C141.989 314.876 223.873 302.964 268.271 235.615C289.619 203.232 304.154 167.524 320.822 132.934C335.193 103.124 350.049 73.6754 373.98 50.0244C430.39 -5.69935 523.562 -3.61733 580.211 51.9268H580.212C586.189 57.7831 591.673 64.0222 596.55 70.8408L597.517 72.2119C600.128 75.9715 603.3 78.5753 607.565 80.374C610.256 81.5066 612.262 83.1044 613.353 85.1084C614.436 87.0994 614.653 89.5579 613.642 92.501V92.502C612.706 95.235 611.054 97.2436 608.915 98.2949C606.78 99.3442 604.093 99.472 601.021 98.3203H601.021C596.744 96.7089 594.443 92.167 595.036 87.5674L595.103 87.1221C596.08 81.3314 593.27 77.2684 590.423 73.2197H590.422C542.021 4.64867 434.357 -3.70942 376.305 56.9688C354.621 79.6313 340.543 107.241 327.294 135.204C310.531 170.569 295.889 206.838 273.756 239.402C238.372 291.447 180.396 316.235 120.351 304.366C60.4385 292.56 14.755 246.602 2.20996 185.608V185.548L2.19922 185.497C1.24301 180.908 0.53125 176.322 0.53125 171.688V159.918C0.531306 131.119 8.08003 102.656 23.3408 78.2773L24.0732 77.1201C27.2805 72.1118 30.8054 67.2243 34.708 62.5176L34.709 62.5166Z"
                  fill="none"
                  stroke="#7C6EF7"
                  strokeWidth="3"
                  strokeLinecap="round"
                  strokeLinejoin="round"
                />
                <path
                  d="M701.758 45.3779C755.599 -2.73291 840.921 -3.0508 895.412 44.4473L896.693 45.5781C905.115 53.1136 913.076 61.0504 919.599 70.2725V70.2734C922.718 74.7076 926.147 78.508 931.662 80.582H931.663C934.172 81.5196 936.017 83.0306 937.048 84.9492C938.076 86.8635 938.322 89.238 937.533 91.9648C936.838 94.3714 935.594 96.2549 933.922 97.4736C932.253 98.6895 930.121 99.2707 927.593 99.0117H927.592C924.602 98.7113 922.257 97.5787 920.724 95.834C919.194 94.093 918.428 91.693 918.688 88.7656C919.204 82.9918 916.77 78.9402 913.861 74.8213V74.8203L913.228 73.9326C859.109 -1.21283 744.356 -3.07621 687.561 70.3398C664.423 100.256 650.037 134.733 634.241 168.418L632.708 171.675C617.219 204.459 602.041 237.318 576.136 263.622L574.895 264.87C532.928 306.628 467.466 318.543 413.186 294.684L411.905 294.113L410.609 293.521C383.493 281.01 362.03 262.295 345.853 237.311V237.31L344.872 235.768C342.673 232.265 340.425 228.626 336.285 226.457L335.817 226.223C333.034 224.887 330.895 223.143 329.771 220.994C328.66 218.867 328.507 216.274 329.827 213.136C330.931 210.51 332.629 208.868 334.65 208.07C336.553 207.32 338.795 207.299 341.182 207.986L341.661 208.133C345.168 209.278 347.083 211.147 347.896 213.456C348.72 215.793 348.45 218.683 347.358 221.926C347.18 222.441 347.1 222.972 347.039 223.526C346.977 224.094 346.935 224.67 346.837 225.361L346.792 225.673L347.011 225.818C396.49 317.712 529.045 326.7 588.41 239.063C610.56 206.375 625.354 170.067 642.104 134.793C657.652 102.066 674.163 70.0441 701.758 45.3779Z"
                  fill="none"
                  stroke="#7C6EF7"
                  strokeWidth="3"
                  strokeLinecap="round"
                  strokeLinejoin="round"
                />
              </svg>
            </div>

            {/* Content cards */}
            {moderns.map((modern, modernIndex) => (
              <div
                className="flex items-center justify-center text-center xs:aspect-auto sm:!aspect-square w-full xs:max-w-full sm:!max-w-[300px] h-full relative z-10"
                key={modernIndex}
              >
                <p className="xs:text-[1rem] text-center xs:max-w-full sm:!max-w-[200px] sm:!text-[1.5rem] xs:leading-[1.5rem] sm:!leading-[2rem] text-grey-900 font-medium px-4 py-2 rounded-lg">
                  {modern}
                </p>
              </div>
            ))}
          </div>
        </MainWrapper>
      </section>
    </>
  );
};

export default ModernTradingSection;
